{% extends "base_admin.html" %}
{% load static %}
{% block content %}
<style>
.container {
    max-width: 900px;
    margin: 40px auto;
    padding: 25px;
    background: #fdfdfd;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    font-family: Arial, sans-serif;
}

.container h2 {
    text-align: center;
    margin-bottom: 20px;
    color: #333;
}

.product-details {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 25px;
}

.product-images {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-bottom: 20px;
}

.product-image {
    flex: 1 1 150px;
    max-width: 150px;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    cursor: zoom-in;
    transition: transform 0.3s ease;
}

.product-image img {
    width: 100%;
    height: auto;
    display: block;
    transition: transform 0.3s ease;
}

.product-image:hover img {
    transform: scale(1.8); /* Zoom factor */
    z-index: 10;
    position: relative;
}

.product-info {
    flex: 2 1 400px;
}

.product-info p {
    font-size: 16px;
    margin: 6px 0;
}

.product-info strong {
    color: #555;
}

.variants-section {
    margin-top: 30px;
}

.variants-section h3 {
    margin-bottom: 15px;
    color: #444;
}

.variants-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
}

.variants-table th, .variants-table td {
    border: 1px solid #ddd;
    padding: 10px 12px;
    text-align: left;
}

.variants-table th {
    background: #f7f7f7;
    color: #333;
}

.variants-table tr:nth-child(even) {
    background: #fafafa;
}

.variants-table tr:hover {
    background: #f1f1f1;
}

.btn-back {
    display: inline-block;
    padding: 10px 18px;
    background: #f062c0;
    color: #fff;
    border-radius: 6px;
    text-decoration: none;
    transition: 0.3s;
}

.btn-back:hover {
    background: #e04faf;
}
</style>

<div class="container">
    <h2>{{ product.product_name }}</h2>

    <div class="product-details">
        <!-- IMAGES — iterate over image fields on the ProductImage object -->
        <div class="product-images">
            {% for img_obj in images %}
                {% if img_obj.image1 %}
                <div class="product-image">
                    <img src="{{ img_obj.image1.url }}" alt="{{ product.product_name }}">
                </div>
                {% endif %}
                {% if img_obj.image2 %}
                <div class="product-image">
                    <img src="{{ img_obj.image2.url }}" alt="{{ product.product_name }}">
                </div>
                {% endif %}
                {% if img_obj.image3 %}
                <div class="product-image">
                    <img src="{{ img_obj.image3.url }}" alt="{{ product.product_name }}">
                </div>
                {% endif %}
                {% if img_obj.image4 %}
                <div class="product-image">
                    <img src="{{ img_obj.image4.url }}" alt="{{ product.product_name }}">
                </div>
                {% endif %}
                {% if img_obj.image5 %}
                <div class="product-image">
                    <img src="{{ img_obj.image5.url }}" alt="{{ product.product_name }}">
                </div>
                {% endif %}
            {% empty %}
            <div class="product-image">
                <img src="{% static 'images/no-image.png' %}" alt="No Image">
            </div>
            {% endfor %}
        </div>

        <div class="product-info">
            <div class="product-info">
    <table class="variants-table">
        <tbody>
            <tr>
                <th>Brand</th>
                <td>{{ product.brand }}</td>
            </tr>
            <tr>
                <th>SKU</th>
                <td>{{ product.sku }}</td>
            </tr>
            <tr>
                <th>Category</th>
                <td>{{ product.subcategory.category.category_name }}</td>
            </tr>
            <tr>
                <th>SubCategory</th>
                <td>{{ product.subcategory.subcategory_name }}</td>
            </tr>
            <tr>
                <th>Gender</th>
                <td>{{ product.get_gender_display }}</td>
            </tr>
            <tr>
                <th>Fabric</th>
                <td>{{ product.fabric }}</td>
            </tr>
            <tr>
                <th>About Product</th>
                <td>{{ product.about_product }}</td>
            </tr>
            <tr>
                <th>Base Price</th>
                <td>₹{{ product.base_price }}</td>
            </tr>
            <tr>
                <th>Final Price</th>
                <td>₹{{ product.final_price }}
                    {% if product.discount_percent > 0 %} 
                    (<small>{{ product.discount_percent }}% off</small>) 
                    {% endif %}
                </td>
            </tr>
            <tr>
                <th>Stock</th>
                <td>{{ product.stock }}</td>
            </tr>
            <tr>
                <th>Status</th>
                <td>{{ product.is_active|yesno:"Active,Inactive" }}</td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>

    <div class="variants-section">
        <h3>Variants</h3>
        <table class="variants-table">
            <thead>
                <tr>
                    <th>Color</th>
                    <th>Age Group</th>
                    <th>SKU</th>
                    <th>Barcode</th>
                    <th>Stock</th>
                    <th>Sold</th>
                    <th>Reserved</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for v in variants %}
                <tr>
                    <td>{{ v.color }}</td>
                    <td>{{ v.age_group }}</td>
                    <td>{{ v.sku }}</td>
                    <td>{{ v.barcode }}</td>
                    <td>{{ v.stock }}</td>
                    <td>{{ v.sold }}</td>
                    <td>{{ v.reserved }}</td>
                    <td>{{ v.is_active|yesno:"Active,Inactive" }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="10">No variants available</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <a href="{% url 'products:admin_product_list' %}" class="btn-back">← Back</a>
</div>

{% endblock %}

