{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Signup | Kiddora</title>
    <link rel="stylesheet" href="{% static 'css/auth.css' %}">

    <style>
            /* Center the h2 */
        .auth-left h2 {
            text-align: center;
            font-size: 28px;
            margin-bottom: 24px;
            color: #111827;
        }
        .password-field {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            right: 12px;
            top: 10px;
            cursor: pointer;
        }

        .strength-container {
            width: 100%;
            height: 6px;
            background: #eee;
            border-radius: 4px;
            margin-top: 6px;
        }

        #strengthBar {
            height: 6px;
            width: 0%;
            border-radius: 4px;
            transition: width 0.3s;
        }

        .password-rules {
            list-style: none;
            padding: 0;
            font-size: 13px;
        }

        .password-rules li {
            color: #9ca3af;
        }

        .password-rules li.valid {
            color: #16a34a;
        }

        #matchText {
            font-size: 13px;
        }
    </style>
</head>
<body>

<div class="auth-container">
    <div class="auth-card">
        <div class="auth-left">
            <h2>Create Account</h2>

            <form method="post" novalidate>
                {% csrf_token %}

                <input type="text" name="username" placeholder="User Name" value="{{ form_data.username }}" required>
                <input type="email" name="email" placeholder="Email" required>

                <div class="password-field">
                    <input type="password" id="password1" name="password1" placeholder="Password" required>
                    <span class="toggle-password" onclick="togglePassword('password1', this)">üëÅ</span>
                </div>

                <!-- Strength bar -->
                <div class="strength-container">
                    <div id="strengthBar"></div>
                </div>
                <p id="strengthText"></p>

                <!-- Requirements -->
                <ul class="password-rules">
                    <li id="rule-length">‚úî At least 6 characters</li>
                    <li id="rule-uppercase">‚úî One uppercase letter</li>
                    <li id="rule-number">‚úî One number</li>
                    <li id="rule-special">‚úî One special character</li>
                </ul>

                <div class="password-field">
                    <input type="password" id="password2" name="password2" placeholder="Confirm Password" required>
                    <span class="toggle-password" onclick="togglePassword('password2', this)">üëÅ</span>
                </div>

                <p id="matchText"></p>
                <button type="submit" class="primary-btn">Sign Up</button>
            </form>

            <p class="bottom-text">
                Already have an account?
                <a href="{% url 'accounts:login' %}">Login now!</a>
            </p>
        </div>

        <div class="auth-right">
            <img src="{% static 'images/gcas_08.jpeg' %}" alt="Signup image">
        </div>
    </div>
</div>
<script>
    const passwordInput = document.getElementById("password1");
    const confirmInput = document.getElementById("password2");

    const strengthBar = document.getElementById("strengthBar");
    const strengthText = document.getElementById("strengthText");

    const ruleLength = document.getElementById("rule-length");
    const ruleUpper = document.getElementById("rule-uppercase");
    const ruleNumber = document.getElementById("rule-number");
    const ruleSpecial = document.getElementById("rule-special");

    passwordInput.addEventListener("input", () => {
        const val = passwordInput.value;

        let strength = 0;

        if (val.length >= 6) {
            ruleLength.classList.add("valid");
            strength++;
        } else ruleLength.classList.remove("valid");

        if (/[A-Z]/.test(val)) {
            ruleUpper.classList.add("valid");
            strength++;
        } else ruleUpper.classList.remove("valid");

        if (/[0-9]/.test(val)) {
            ruleNumber.classList.add("valid");
            strength++;
        } else ruleNumber.classList.remove("valid");

        if (/[^A-Za-z0-9]/.test(val)) {
            ruleSpecial.classList.add("valid");
            strength++;
        } else ruleSpecial.classList.remove("valid");

        // Strength indicator
        const width = strength * 25;
        strengthBar.style.width = width + "%";

        if (strength <= 1) {
            strengthBar.style.background = "#ef4444";
            strengthText.textContent = "Weak password";
        } else if (strength === 2 || strength === 3) {
            strengthBar.style.background = "#f59e0b";
            strengthText.textContent = "Medium password";
        } else {
            strengthBar.style.background = "#16a34a";
            strengthText.textContent = "Strong password";
        }
    });

    confirmInput.addEventListener("input", () => {
        const matchText = document.getElementById("matchText");
        if (confirmInput.value === passwordInput.value) {
            matchText.textContent = "Passwords match ‚úî";
            matchText.style.color = "#16a34a";
        } else {
            matchText.textContent = "Passwords do not match";
            matchText.style.color = "#ef4444";
        }
    });

    function togglePassword(fieldId, icon) {
        const field = document.getElementById(fieldId);
        field.type = field.type === "password" ? "text" : "password";
    }
    </script>
</body>
</html>


