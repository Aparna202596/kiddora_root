{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>Verify OTP | Kiddora</title>
    <link rel="stylesheet" href="{% static 'css/auth.css' %}">
  </head>
  <body>
    <div class="auth-container">
      <div class="auth-card">
        <div class="auth-left">
          <h2>Verify OTP</h2>
          <p>Enter the OTP sent to your email address</p>

          <form method="post">
            {% csrf_token %}
            <input type="text" name="otp" placeholder="Enter OTP" required>
            <button type="submit" class="primary-btn">Verify OTP</button>
          </form>

          <!-- OTP TIMER -->
          <p id="timer"></p>

          <!-- RESEND LINK (FIXED) -->
          <p>
            Didn't receive OTP?
            <a href="{% url 'accounts:resend_signup_otp' %}" class="link">Resend OTP</a>
          </p>

          {% if messages %}
          <ul>
            {% for message in messages %}
            <li>{{ message }}</li>
            {% endfor %}
          </ul>
          {% endif %}

          <a href="{% url 'accounts:login' %}" class="link">Go back to Login page</a>
        </div>

        <div class="auth-right">
          <img src="{% static 'images/verify_otp.PNG' %}" alt="Verify OTP">
        </div>
      </div>
    </div>

    <!-- TIMER SCRIPT -->
<p id="timer">Resend OTP in 60s</p>
<a id="resendBtn" href="{% url 'accounts:resend_signup_otp' %}" style="display:none;">Resend OTP</a>

<script>
let timeLeft = 60;
let timer = setInterval(function(){
    timeLeft--;
    document.getElementById("timer").innerText = "Resend OTP in " + timeLeft + "s";
    if(timeLeft <= 0){
        clearInterval(timer);
        document.getElementById("timer").style.display = "none";
        document.getElementById("resendBtn").style.display = "block";
    }
},1000);
</script>

  </body>
</html>


