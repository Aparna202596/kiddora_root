{% extends "base_staff.html" %}
{% load static %}

{% block content %}

<style>
/* Page background stays neutral */
body {
    background: #f4f6f8;
    font-family: Arial, sans-serif;
}

/* Main white card */
.admin-container {
    background: #ffffff;
    padding: 24px;
    border-radius: 14px;
    color: #000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.06);
}

/* Page title */
.admin-title {
    font-size: 22px;
    font-weight: 600;
    color: #222;
    margin-bottom: 20px;
    text-align: left;
}

/* Search bar alignment */
.search-form {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    margin-bottom: 20px;
}

.search-form input {
    max-width: 260px;
    padding: 8px 12px;
    border-radius: 8px;
    border: 1px solid #ddd;
    font-size: 14px;
}

.search-form button {
    padding: 8px 16px;
    border-radius: 8px;
    border: none;
    background: #f06292;
    color: #fff;
    font-size: 14px;
    cursor: pointer;
}

/* Action buttons (+ Add / Logout) */
.admin-container .btn-success,
.admin-container .btn-danger {
    border-radius: 8px;
    font-size: 14px;
}

/* Table styling */
.admin-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    background: #fff;
}

.admin-table th,
.admin-table td {
    padding: 14px;
    text-align: left;
    font-size: 14px;
    color: #333;
}

/* Table header */
.admin-table th {
    background: #f8f8f8 !important;
    font-weight: 600;
    border-bottom: 1px solid #eaeaea;
}

/* Table rows */
.admin-table tr {
    border-bottom: 1px solid #eee;
}

/* Remove bootstrap dark styling influence */
.table-dark {
    --bs-table-bg: transparent;
    --bs-table-color: #333;
}

/* Center action column */
.admin-table td:last-child {
    text-align: left;
}

/* Status text */
.admin-table td:nth-child(4) {
    font-weight: 600;
}

/* Buttons inside table */
.admin-table .btn-warning {
    background: none;
    border: none;
    color: #f39c12;
    padding: 0;
    font-size: 14px;
}

.admin-table .btn-danger {
    background: none;
    border: none;
    color: #555;
    padding: 0;
    font-size: 14px;
}

/* Hover effect */
.admin-table tr:hover {
    background: #fafafa;
}

/* Responsive wrapper cleanup */
.table-responsive {
    border-radius: 10px;
    overflow: hidden;
}
</style>


<div class="container mt-5">
    <div class="admin-container">

        <h2 class="admin-title">Staff Management</h2>

        <!-- Search -->
        <form method="get" class="d-flex justify-content-center mb-3 search-form">
            <input
                type="text"
                name="q"
                value="{{ query }}"
                class="form-control me-2"
                placeholder="Search staff by username"
            >
            <button type="submit" class="btn btn-primary">Search</button>
        </form>

        <!-- Action Buttons -->
        <div class="d-flex justify-content-center mb-4">
            <a href="{% url 'admin_add' %}" class="btn btn-success me-2">
                + Add Staff
            </a>
            <a href="{% url 'logout' %}" class="btn btn-danger">
                Logout
            </a>
        </div>

        <!-- Table -->
        <div class="table-responsive">
            <table class="table table-dark table-hover admin-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Active</th>
                        <th>Last Login</th>
                        <th>Joined</th>
                        <th>Actions</th>
                    </tr>
                </thead>

                <tbody>
                    {% for staff in users %}
                        <tr>
                            <td>{{ staff.id }}</td>
                            <td>{{ staff.username }}</td>
                            <td>{{ staff.email }}</td>
                            <td>
                                {% if staff.is_active %}
                                    Yes
                                {% else %}
                                    No
                                {% endif %}
                            </td>
                            <td>{{ staff.last_login|default:"Never" }}</td>
                            <td>{{ staff.date_joined|date:"Y-m-d H:i" }}</td>
                            <td>
                                <a
                                    href="{% url 'admin_edit' staff.id %}"
                                    class="btn btn-sm btn-warning me-1"
                                >
                                    Edit
                                </a>

                                <form
                                    method="post"
                                    action="{% url 'admin_delete' staff.id %}"
                                    style="display:inline;"
                                >
                                    {% csrf_token %}
                                    <button
                                        type="submit"
                                        class="btn btn-sm btn-danger"
                                        onclick="return confirm('Delete this staff user?');"
                                    >
                                        Delete
                                    </button>
                                </form>
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="7" class="text-center">
                                No staff users found.
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
</div>

{% endblock %}
