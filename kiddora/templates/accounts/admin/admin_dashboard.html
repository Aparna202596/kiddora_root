{% extends "base_admin.html" %}
{% load static %}

{% block title %}Admin Dashboard | Kiddora{% endblock %}

{% block content %}
<div class="dashboard-container">

    <!-- TODAY SALES -->
    <h2 class="dashboard-title">Today's Sales</h2>

    <div class="stats-grid">
        <div class="stat-card pink">
            <i class="stat-icon fa-solid fa-indian-rupee-sign"></i>
            <h3>30K</h3>
            <p>Total Sales</p>
            <small>-8% than yesterday</small>
        </div>

        <div class="stat-card yellow">
            <i class="stat-icon fa-solid fa-receipt"></i>
            <h3>300</h3>
            <p>Total Orders</p>
            <small>-5% than yesterday</small>
        </div>

        <div class="stat-card green">
            <i class="stat-icon fa-solid fa-box"></i>
            <h3>50</h3>
            <p>Products Sold</p>
        </div>

        <div class="stat-card purple">
            <i class="stat-icon fa-solid fa-user-plus"></i>
            <h3>15</h3>
            <p>New Customers</p>
            <small>+3% than yesterday</small>
        </div>
    </div>

    <!-- MID SECTION -->
    <div class="middle-section">

        <!-- LEFT: DONUT CHARTS -->
        <div class="donut-wrapper">
            <div class="donut-card">
                <canvas id="ordersChart"></canvas>
                <span>Total Orders</span>
            </div>

            <div class="donut-card">
                <canvas id="customersChart"></canvas>
                <span>Customer Growth</span>
            </div>

            <div class="donut-card">
                <canvas id="revenueChart"></canvas>
                <span>Total Revenue</span>
            </div>
        </div>

        <!-- RIGHT: PRODUCT SOLD -->
        <div class="chart-wide">
            <div class="chart-header">
                <h4>Product Sold (Last 7 Days)</h4>
                <button class="btn-outline">Download Report</button>
            </div>
            <div class="chart-sm">
                <canvas id="productSoldChart"></canvas>
            </div>
        </div>
    </div>

    <!-- REVENUE COMPARISON -->
    <div class="chart-large">
        <h4>Total Revenue Comparison (2024 vs 2025)</h4>
        <div class="chart-sm">
            <canvas id="revenueCompareChart"></canvas>
        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
function donutChart(id, color, value) {
    new Chart(document.getElementById(id), {
        type: 'doughnut',
        data: {
            datasets: [{
                data: [value, 100 - value],
                backgroundColor: [color, '#eee'],
                borderWidth: 0
            }]
        },
        options: {
            cutout: '70%',
            plugins: {
                legend: { display: false },
                tooltip: { enabled: false }
            }
        }
    });
}

donutChart('ordersChart', '#ff4d4d', 81);
donutChart('customersChart', '#2ecc71', 22);
donutChart('revenueChart', '#3498db', 62);

new Chart(document.getElementById('productSoldChart'), {
    type: 'line',
    data: {
        labels: ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
        datasets: [{
            data: [8,12,10,18,14,20,16],
            borderColor: '#3498db',
            backgroundColor: 'rgba(52,152,219,0.15)',
            tension: 0.45,
            fill: true,
            pointRadius: 4
        }]
    },
    options: {
        plugins: { legend: { display: false } },
        scales: {
            y: { beginAtZero: true },
            x: {}
        }
    }
});

new Chart(document.getElementById('revenueCompareChart'), {
    type: 'line',
    data: {
        labels: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
        datasets: [
            {
                label: '2025',
                data: [120,150,180,200,240,260,300,320,350,380,420,450],
                borderColor: '#e74c3c',
                tension: 0.4
            },
            {
                label: '2024',
                data: [100,130,160,180,210,230,260,290,310,340,370,400],
                borderColor: '#3498db',
                tension: 0.4
            }
        ]
    }
});
</script>

<style>
.dashboard-container { padding: 28px; }
.dashboard-title { margin-bottom: 24px; font-size: 22px; }

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
    gap: 20px;
}

.stat-card {
    padding: 18px;
    border-radius: 14px;
}
.stat-icon { font-size: 24px; margin-bottom: 6px; }

.pink { background:#ffe6ee; }
.yellow { background:#fff6d9; }
.green { background:#e7f9ef; }
.purple { background:#f1e9ff; }

/* MID LAYOUT */
.middle-section {
    display: grid;
    grid-template-columns: 360px 1fr;
    gap: 24px;
    margin-top: 40px;
}

/* DONUTS */
.donut-wrapper {
    background: #fff;
    padding: 18px;
    border-radius: 16px;
    display: flex;
    justify-content: space-between;
}

.donut-card {
    text-align: center;
}
.donut-card canvas {
    width: 90px !important;
    height: 90px !important;
}
.donut-card span {
    font-size: 13px;
    display: block;
    margin-top: 6px;
}

/* CHARTS */
.chart-wide, .chart-large {
    background: #fff;
    padding: 20px;
    border-radius: 16px;
}

.chart-sm {
    height: 220px;
}

.chart-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
}

.btn-outline {
    border: 1px solid #3498db;
    background: none;
    color: #3498db;
    padding: 6px 14px;
    border-radius: 8px;
    font-size: 12px;
}
</style>

{% endblock %}